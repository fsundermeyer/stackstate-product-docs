= Configurer les notifications
:revdate: 2025-07-10
:page-revdate: {revdate}
:description: SUSE Observability

Pour configurer une nouvelle notification, voici les étapes à suivre :

* <<_create_a_new_notification,Créer une nouvelle notification>>
* <<_configure_when_to_notify,Configurer le moment de la notification>>
* <<_where_to_send_notifications,Définir où les notifications doivent être envoyées>>

== Créer une nouvelle notification

Ouvrez la page des notifications via le lien situé dans la moitié inférieure du menu hamburger de l'interface utilisateur de SUSE Observability. Cela permet d'obtenir une vue d'ensemble de toutes les notifications déjà configurées, y compris leur état.

Vous pouvez vérifier si l'avis souhaité existe déjà. Si ce n'est pas le cas, créez-en une nouvelle en cliquant sur le bouton "Ajouter une nouvelle notification".

== Configurer le moment de la notification

image::k8s/notifications-add-new-notification.png[Ajouter une nouvelle notification]

Configurer la notification :

. Nom - Choisissez un nom court mais qui décrit bien l'intention de cette notification. Il s'agit d'une référence pour la vue d'ensemble des notifications.
. État - La notification peut être désactivée temporairement si elle n'est pas encore nécessaire, si elle s'avère trop bruyante, etc.
. Notifier quand - Un état de santé critique déclenche toujours une notification, mais il est possible d'inclure des états divergents.
. Portée - Dans l'exemple, les états de santé de tous les moniteurs sur les pods dans l'espace de noms Kubernetes par défaut seront envoyés. Pour modifier cette sélection, utilisez les filtres disponibles dans la section " <<_scope,champ d'application">>.

=== Champ d'application

Il existe 4 filtres de portée possibles. Par défaut, une notification est envoyée pour chaque état de santé critique (et éventuellement divergent). Les filtres sont utilisés pour limiter cette portée. Un état de santé ne donnera lieu à une notification que s'il correspond à tous les filtres.

* Moniteurs : Sélectionner un ou plusieurs moniteurs spécifiques. Les notifications ne seront envoyées que pour les états de santé des moniteurs sélectionnés.
* Moniteur tags : Sélectionnez une ou plusieurs étiquettes de moniteur. Les notifications ne seront envoyées que pour les états de santé des moniteurs qui ont au moins une des étiquettes sélectionnées.
* Types de composants : Sélectionnez un ou plusieurs types de composants. Les notifications ne seront envoyées que pour les états de santé des composants des types sélectionnés.
* Étiquettes de composants : Sélectionnez une ou plusieurs étiquettes de composant. Les notifications ne seront envoyées que pour les états de santé des composants qui ont au moins une valeur correspondante pour chaque clé distincte dans les balises sélectionnées.

.Exemple de balises de composants
[%collapsible]
====
Disons que les balises sélectionnées sont [ `k8s-scope:prod-us/checkout`, `k8s-scope:prod-emea/checkout`, `team:blue` ].  Les clés dans ce cas sont `k8s-scope` et `team`.

Ces éléments seront alors en adéquation :

* un composant avec les étiquettes [ `k8s-scope:prod-emea/checkout`, `team:blue` ]
* un composant avec les étiquettes [ `k8s-scope:prod-us/checkout`, `team:blue` ]

Bien que ces éléments ne soient pas identiques :

* un composant avec des étiquettes [ `k8s-scope:prod-emea/checkout` ]
* un composant avec les étiquettes [ `k8s-scope:prod-us/checkout`, `team:green` ]
* un composant avec les étiquettes [ `k8s-scope:prod-emea/carts`, `team:blue` ]
====

== Où envoyer les notifications ?

SUSE Observability peut envoyer des notifications à différents systèmes externes via des canaux. Les canaux pris en charge sont les suivants :

* xref:/use/alerting/notifications/channels/slack.adoc[Slack] - Envoyer des notifications à Slack
* xref:/use/alerting/notifications/channels/teams.adoc[Teams] - Envoyer des notifications à Microsoft Teams
* xref:/use/alerting/notifications/channels/webhook.adoc[Webhook]: envoi de notifications à un webhook. L'extrémité du webhook peut traduire la charge utile de SUSE Observability en toute API tierce personnalisée nécessaire.
* xref:/use/alerting/notifications/channels/opsgenie.adoc[Opsgenie] - Envoyer des notifications à Opsgenie

En général, SUSE Observability envoie deux types de messages pour les notifications :

. Un message `open` lorsqu'un état de santé devient critique ou déviant. Ce message peut être répété en cas de changement de l'état de santé.
. Un message `close` lorsque l'état de santé n'est plus critique ou déviant ou lorsque, pour d'autres raisons (le composant a disparu, le moniteur a été retiré, etc.), la notification n'est plus active.
