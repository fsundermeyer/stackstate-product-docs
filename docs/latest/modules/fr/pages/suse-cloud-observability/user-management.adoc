= Gestion des utilisateurs
:description: Gestion des utilisateurs de SUSE Cloud Observability

Les utilisateurs des locataires de SUSE Cloud Observability (instances de SUSE Cloud Observability) sont gérés à l'aide de https://www.keycloak.org/[Keycloak]. Chaque client (locataire) dispose d'un domaine Keycloak dédié. Un lien vers la console Keycloak est envoyé dans le message de bienvenue lors de la création d'un utilisateur.

SUSE Cloud Observability redirige les utilisateurs vers Keycloak pour l'authentification. Les utilisateurs sont censés être membres d'un ou de plusieurs groupes Keycloak.

Les groupes prédéfinis de Keycloak :

* *realm-admin*: Les membres de ce groupe peuvent se connecter à la console Keycloak realm et effectuer des opérations de gestion des utilisateurs.
* *stackstate-k8s-troubleshooter*: Les utilisateurs de ce groupe se voient attribuer le rôle de client `stackstate-k8s-troubleshooter` Keycloak, qui correspond au rôle SUSE Cloud Observability du même nom. Ce rôle accorde les autorisations habituelles de SUSE Cloud Observability.
* *stackstate-k8s-admin*: Les utilisateurs de ce groupe se voient attribuer le rôle de client `stackstate-k8s-admin` Keycloak, qui correspond au rôle SUSE Cloud Observability du même nom. Le rôle accorde des autorisations privilégiées à SUSE Cloud Observability.

== URL de gestion des utilisateurs

Lorsqu'un nouvel utilisateur est créé, il reçoit un message de bienvenue contenant un lien vers la page de gestion des utilisateurs de Keycloak. Ce lien est *exclusivement réservé à l'administrateur du locataire*, qui est le premier utilisateur par défaut. Le format URL est le suivant : `https://<keycloak_FQDN>/realms/<your_dedicated_Keycloak_realm>/account`.

== Gestion des utilisateurs

* Connectez-vous à la console d'administration de Keycloak.

image::keycloak_admin_console.png[Console d'administration de Keycloak]

=== Gérer les utilisateurs

* Dans le menu de gauche, sélectionnez `Users` dans la section `Manage`.

==== Ajouter un nouvel utilisateur

Cliquez sur le bouton `Add user` et saisissez les informations relatives à l'utilisateur, telles que le "nom d'utilisateur", l'"adresse électronique", le "prénom" et le "nom de famille".

. Laissez le champ `Required users actions` vide.
. Ajouter l'utilisateur aux groupes requis.
. Cliquez sur `Save`.
+
Le message de bienvenue contenant le lien d'inscription et les liens vers le locataire SUSE Cloud Observability, les consoles Keycloak Admin et Account sont envoyés par courrier électronique à l'utilisateur.

NOTE: Pour activer le compte, ce qui inclut la confirmation par courrier électronique et la réinitialisation du mot de passe, l'utilisateur doit suivre le lien d'inscription.

image::keycloak_create_user.png[Keycloak Créer un utilisateur]

==== Mise à jour des données de l'utilisateur

Pour *modifier les détails de l'utilisateur*, sélectionnez l'utilisateur en cliquant sur Nom d'utilisateur.

. Modifiez les détails si nécessaire.
. Définissez un ou plusieurs `Required user actions`, par exemple pour obliger les utilisateurs à mettre à jour leur mot de passe ou pour configurer des mots de passe à usage unique.
. Appuyez sur le bouton `Save` lorsque vous avez terminé.

image::keycloak_update_user.png[Utilisateur de la mise à jour de Keycloak]

==== Suppression d'un utilisateur

. Pour *supprimer un ou plusieurs utilisateurs*, sélectionnez les utilisateurs concernés et appuyez sur la touche `Delete user`.

=== Composition du groupe

. Connectez-vous à la console d'administration Keycloak.
. Dans la section `Groups`, recherchez le groupe que vous souhaitez gérer.
. Cliquez sur le nom du groupe pour ouvrir les détails du groupe et accéder à l'onglet `Members`.
. Pour ajouter un nouveau membre au groupe, appuyez sur le bouton `Add Member` et sélectionnez les utilisateurs requis.
. Pour supprimer des utilisateurs du groupe, sélectionnez les utilisateurs dans la liste, puis dans le menu qui se trouve sur la même ligne que le bouton `Add member` marqué "â'®", sélectionnez `Leave group`.
